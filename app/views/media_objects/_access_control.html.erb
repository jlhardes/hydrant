<% if flash[:error] %><div class="alert alert-error"><%= flash[:error] %></div><% end %>
<h3>Access control</h3>
<p class="whitespace">Some short blurb explaining what the point of access controls are]</p>

<div class="whitespace" id="default_level">
<h4>Default access</h4>
<%= twitter_bootstrap_form_for @mediaobject, 
      html: { 
	class: "form-horizontal",
    	id: 'access_control_form' } do |vid| %>
    <%= hidden_field_tag :step, @active_step %>
    <%= vid.hidden_field :pid %>

    <%= label_tag :access do %>
      <%= radio_button_tag :access, 'public', (@mediaobject.access == 'public') %>
      This resource should be accessible to the general public without having to register
    <% end %>

    <%= label_tag :access do %>
      <%= radio_button_tag :access, 'restricted', (@mediaobject.access == 'restricted') %>
      Only registered users should have access to this resource
    <% end %>

    <%= label_tag :access do %>
      <%= radio_button_tag :access, 'private', (@mediaobject.access == 'private') %>
      Only I should be able to see this resource
    </div>

    <div class="whitespace" id="exceptions">
    <h4>Exceptions</h4>
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <td rowspan="2">Groups</td>
        </tr>
      </thead>
      <% unless groups.empty? %>
        <tbody>
          <% groups.each do |group| %>
        <tr>
          <td><%= group %></td>
          <td class="controls">[delete]</td>  
        </tr>
      <% end %>
      </tbody>
    <% end %>
    
      <thead>
        <tr>
          <td rowspan="2">Groups</td>
        </tr>
      </thead>
      <% unless users.empty? %>
        <tbody>
          <% users.each do |user| %>
        <tr>
          <td><%= user %></td>
          <td class="controls">[delete]</td>  
        </tr>
      <% end %>
      </tbody>
    <% end %>
    </table>
</div>

    <%= vid.actions do |actions| %>
      <%= render "workflow_buttons", form: vid %>
    <% end %>
  <%- end -%>
<% end %>
